---
title: 'Axios Response with generic'
date: '2023-06-03'
tags: ['axios', 'typescript']
---

![](https://velog.velcdn.com/images/ctdlog/post/87ec4f29-9b6d-456c-8b03-89c3a42c3fb2/image.png)

# âš™ï¸ Axiosì˜ ê¸°ë³¸ response íƒ€ì…ì„ ë°”ê¿”ë³´ì

## ğŸ¤” Why?

### ì™œ ê¸°ë³¸ response íƒ€ì…ì„ ë°”ê¿”ì„œ ì‚¬ìš©í• ê¹Œìš”?

![](https://velog.velcdn.com/images/ctdlog/post/18b75ead-4fd0-4b15-99f2-0744f3a1ca88/image.png)

![](https://velog.velcdn.com/images/ctdlog/post/40f159fe-cb23-44a1-8c10-030decb19916/image.png)

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ í™˜ê²½ì˜ í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” `ì„œë²„ì˜ ì‘ë‹µê°’` ì„ ê¸°ë°˜ìœ¼ë¡œ íƒ€ì…ì„ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìœ„ì™€ ê°™ì€ API ì‘ë‹µê°’ì´ ë‚´ë ¤ì˜¨ë‹¤ê³  í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì´ ì‘ë‹µê°’ interfaceë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤.

```tsx
interface FooResponse {
  statusCode: number;
  payload: {
    id: number;
    email: string;
  };
}

interface BarResponse {
  statusCode: number;
  payload: {
    id: number;
    role: number;
  };
}
```

`FooResponse` ì™€ `BarResponse` ë¥¼ ë³´ë©´ ì•Œë‹¤ì‹œí”¼ ëŒ€ë¶€ë¶„ì˜ APIë“¤ì€ ë‹¤ìŒê³¼ ê°™ì´ ë¹„ìŠ·í•œ í˜•íƒœì˜ ì‘ë‹µê°’ì„ ë°˜í™˜ í•©ë‹ˆë‹¤. ë•Œë¬¸ì— response interfaceë¥¼ ë§¤ ë²ˆ ìƒˆë¡œ ë§Œë“¤ê¸° ë³´ë‹¤ëŠ” ì¤‘ë³µë˜ëŠ” interfaceë¥¼ ë¯¸ë¦¬ ì •ì˜í•˜ê³  ì‚¬ìš©í•˜ëŠ” í¸ì´ ì¢‹ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.

## ğŸ” How?

### ì¤‘ë³µë˜ëŠ” ê°’ë“¤ì„ ê³µí†µ ì¸í„°í˜ì´ìŠ¤ë¡œ ë¶„ë¦¬í•˜ì—¬ ìƒì†ë°›ëŠ”ê±´ ì–´ë–¨ê¹Œìš”?

```tsx
interface ServerResponse<T> {
	statusCode: number;
	payload: T;
}

interface FooResponse {
	id: number;
	email: string;
	...
}

interface BarResponse {
	id: number;
	role: number;
	...
}

/* const fooResponse: Promise<AxiosResponse<ServerResponse<FooResponse>, any>> */
const fooResponse = axios.get<ServerResponse<FooResponse>>('...');
/* /* const barResponse: Promise<AxiosResponse<ServerResponse<BarResponse>, any>> */
const barResponse = axios.get<ServerResponse<BarResponse>>('...');
```

- ì´ì œ `FooResponse` ì™€ `BarResponse` ëŠ” ë§¤ë²ˆ `statusCode`ì™€ `payload`ë¥¼ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ `ServerResponse`ì™€ `ì œë„¤ë¦­`ì„ í™œìš©í•˜ì—¬ íƒ€ì…ì„ ì¬í™œìš© í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
- ë‹¤ë§Œ ë§¤ë²ˆ `ServerResponse` ë¥¼ ì‘ì„±í•˜ëŠ” ê±´ ê·€ì°®ì€ ì¼ì´ê¸° ë•Œë¬¸ì—, axiosë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ axiosë¥¼ ë˜í•‘í•œ `Axios ì¸ìŠ¤í„´ìŠ¤` ë¥¼ ë§Œë“¤ì–´ì„œ ê¸°ë³¸ íƒ€ì…ì„ `ServerResponse`ë¡œ ì •ì˜í•´ë´…ì‹œë‹¤.

[Axios ì¸ìŠ¤í„´ìŠ¤ |Â Axios Docs](https://axios-http.com/kr/docs/instance)

### Axios Response íƒ€ì…ì€ ì–´ë–»ê²Œ ë§Œë“¤ì–´ì ¸ìˆì„ê¹Œ?

- axiosì˜ ê¸°ë³¸ íƒ€ì…ì€ `AxiosStatic` ì´ë©°, `AxiosInstance`ë¥¼ ìƒì† ë°›ìŠµë‹ˆë‹¤.
- `AxiosStatic`ì—ëŠ” Axios ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ ë•Œ ì‚¬ìš©ë˜ëŠ”, `create` ë©”ì„œë“œì— ëŒ€í•œ íƒ€ì…ë„ ë³´ì…ë‹ˆë‹¤.

```tsx
/*
  https://github.com/axios/axios/blob/v1.x/index.d.ts
  line 527~543
*/
export interface AxiosStatic extends AxiosInstance {
  âœ… create(config?: CreateAxiosDefaults): AxiosInstance;
  Cancel: CancelStatic;
  CancelToken: CancelTokenStatic;
  Axios: typeof Axios;
  AxiosError: typeof AxiosError;
  HttpStatusCode: typeof HttpStatusCode;
  readonly VERSION: string;
  isCancel: typeof isCancel;
  all: typeof all;
  spread: typeof spread;
  isAxiosError: typeof isAxiosError;
  toFormData: typeof toFormData;
  formToJSON: typeof formToJSON;
  CanceledError: typeof CanceledError;
  AxiosHeaders: typeof AxiosHeaders;
}
```

- `AxiosInstance` íƒ€ì…ì€ ë‹¤ìŒê³¼ ê°™ìœ¼ë©°, `Axios` íƒ€ì…ì„ ìƒì† ë°›ìŠµë‹ˆë‹¤.

```tsx
/* 
  https://github.com/axios/axios/blob/v1.x/index.d.ts 
  line 494~503  
*/
export interface AxiosInstance extends Axios {
  <T = any, R = AxiosResponse<T>, D = any>(
    config: AxiosRequestConfig<D>,
  ): Promise<R>;
  <T = any, R = AxiosResponse<T>, D = any>(
    url: string,
    config?: AxiosRequestConfig<D>,
  ): Promise<R>;

  defaults: Omit<AxiosDefaults, 'headers'> & {
    headers: HeadersDefaults & {
      [key: string]: AxiosHeaderValue;
    };
  };
}
```

- `Axios`ì—ëŠ” ìì£¼ ì‚¬ìš©ë˜ëŠ” `get`, `post` ë“±ì˜ íƒ€ì…ì´ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

```tsx
/*
  https://github.com/axios/axios/blob/v1.x/index.d.ts
  line 473~492
*/
export class Axios {
  constructor(config?: AxiosRequestConfig);
  defaults: AxiosDefaults;
  interceptors: {
    request: AxiosInterceptorManager<InternalAxiosRequestConfig>;
    response: AxiosInterceptorManager<AxiosResponse>;
  };
  getUri(config?: AxiosRequestConfig): string;
  request<T = any, R = AxiosResponse<T>, D = any>(config: AxiosRequestConfig<D>): Promise<R>;
  âœ… get<T = any, R = AxiosResponse<T>, D = any>(url: string, config?: AxiosRequestConfig<D>): Promise<R>;
  delete<T = any, R = AxiosResponse<T>, D = any>(url: string, config?: AxiosRequestConfig<D>): Promise<R>;
  head<T = any, R = AxiosResponse<T>, D = any>(url: string, config?: AxiosRequestConfig<D>): Promise<R>;
  options<T = any, R = AxiosResponse<T>, D = any>(url: string, config?: AxiosRequestConfig<D>): Promise<R>;
  âœ… post<T = any, R = AxiosResponse<T>, D = any>(url: string, data?: D, config?: AxiosRequestConfig<D>): Promise<R>;
  put<T = any, R = AxiosResponse<T>, D = any>(url: string, data?: D, config?: AxiosRequestConfig<D>): Promise<R>;
  patch<T = any, R = AxiosResponse<T>, D = any>(url: string, data?: D, config?: AxiosRequestConfig<D>): Promise<R>;
  postForm<T = any, R = AxiosResponse<T>, D = any>(url: string, data?: D, config?: AxiosRequestConfig<D>): Promise<R>;
  putForm<T = any, R = AxiosResponse<T>, D = any>(url: string, data?: D, config?: AxiosRequestConfig<D>): Promise<R>;
  patchForm<T = any, R = AxiosResponse<T>, D = any>(url: string, data?: D, config?: AxiosRequestConfig<D>): Promise<R>;
}
```

- ì—¬ê¸°ì„œ `get`, `post` ë“±ì˜ ë©”ì„œë“œë“¤ì€ 3ê°€ì§€ ì œë„¤ë¦­ íƒ€ì…(T, R, D)ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ëŠ”ë° ê·¸ ì¤‘ getì´ return í•˜ëŠ” `Promise<R>`ì˜ Rì˜ íƒ€ì…ì€ `AxiosResponse<T>` ì…ë‹ˆë‹¤.

### AxiosResponse íƒ€ì… ì‚´í´ë³´ê¸°

```tsx
/* 
  https://github.com/axios/axios/blob/v1.x/index.d.ts 
  line 381~388
*/
export interface AxiosResponse<T = any, D = any> {
  data: T;
  status: number;
  statusText: string;
  headers: RawAxiosResponseHeaders | AxiosResponseHeaders;
  config: InternalAxiosRequestConfig<D>;
  request?: any;
}
```

- `AxiosResponse`ëŠ” Axiosì˜ HTTP ì‘ë‹µ ê°ì²´ì¸ë°, ê¸°ë³¸ì ì¸ HTTP ì‘ë‹µ ê°’ë“¤ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
- `AxiosResponse`ëŠ” 2ê°€ì§€ ì œë„¤ë¦­ íƒ€ì…ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ëŠ”ë° ê·¸ ì¤‘ `T`ëŠ” ë°ì´í„°ì…ë‹ˆë‹¤. HTTP í†µì‹ ì˜ ì‘ë‹µ ë°ì´í„°ì— ë°˜í™˜ë˜ëŠ” ìœ í˜•ì— ë”°ë¼ ë‹¤ë¥¸ íƒ€ì…ì„ ì„ ì–¸í•  ìˆ˜ ìˆê²Œ ì œë„¤ë¦­ìœ¼ë¡œ ë˜ì–´ìˆìŠµë‹ˆë‹¤.

```tsx
interface FooResponse {
	id: number;
	name: string;
	...
}

/* const response: Promise<AxiosResponse<FooResponse, any>> */
const response = axios.get<FooResponse>('...')
```

ì•ì„œ ì–¸ê¸‰í–ˆë“¯ ì„œë²„ì˜ ì‘ë‹µ ê°’ì€ ë§¤ë²ˆ ë‹¤ë¥¼ ìˆ˜ ìˆì§€ë§Œ, ëŒ€ë¶€ë¶„ í•­ìƒ í¬í•¨ë˜ì–´ ìˆëŠ” ê°’ë“¤ì´ ìˆìŠµë‹ˆë‹¤.

```tsx
interface ServerResponse<T> {
  	/* í•­ìƒ ì‘ë‹µê°’ ê°ì²´ì— í¬í•¨ë˜ì–´ ìˆëŠ” ê°’ë“¤ */
	statusCode: number
	message: string
	...
	payload: T
}
```

ì‘ë‹µê°’ì´ ê°€ë³€ì ì´ê¸° ë•Œë¬¸ì— íƒ€ì…ì„ ë¯¸ë¦¬ ì •ì˜í•  ìˆ˜ ì—†ëŠ” ê°’ì¸ `payload`ë§Œ ì œë„¤ë¦­ìœ¼ë¡œ ë§Œë“¤ê³ , ê³µí†µì ìœ¼ë¡œ ë„˜ì–´ì˜¤ëŠ” ê°’ì„ `AxiosResponse` ì œë„¤ë¦­ ë§¤ê°œë³€ìˆ˜ì— ë„˜ê¸°ê²Œ ë˜ë©´ ë§¤ë²ˆ ê³µí†µê°’ì— ëŒ€í•œ íƒ€ì…ì„ ì„ ì–¸í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.

```tsx
const api = {
  /* get: <T>(url: string, config?: AxiosRequestConfig) => Promise<AxiosResponse<ServerResponse<T>, any>> */
  get: <T>(url: string, config?: AxiosRequestConfig) =>
    axios.get<ServerResponse<T>>(url, config)
};

/* const response: Promise<AxiosResponse<ServerResponse<T>, any>> */
const response = api.get();
```

## ğŸ˜ Conclusion

> ìƒˆë¡œ ë§Œë“  apiì˜ get ë©”ì„œë“œëŠ” `Promise<AxiosResponse<ServerResponse<T>, any>>`ë¥¼ return í•˜ê²Œ ë˜ë©° `ServerResponse`ë¥¼ ê¸°ë³¸ íƒ€ì…ìœ¼ë¡œ ê°€ì§€ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

```tsx
âŒ /* Before 1 */
interface FooResponse {
	statusCode: number;
	payload: {
		id: number;
		email: string;
	}
}

interface BarResponse {
	statusCode: number;
	payload: {
		id: number;
		role: number;
	}
}

------------------------------------------------------------------------------

ğŸ¤” /* Before 2 */
interface ServerResponse<T> {
	statusCode: number;
	payload: T;
}

interface FooResponse {
	id: number;
	email: string;
	...
}

interface BarResponse {
	id: number;
	role: number;
	...
}

/* const fooResponse: Promise<AxiosResponse<ServerResponse<FooResponse>, any>> */
const fooResponse = axios.get<ServerResponse<FooResponse>>('...');
/* const barResponse: Promise<AxiosResponse<ServerResponse<BarResponse>, any>> */
const barResponse = axios.get<ServerResponse<BarResponse>>('...');

------------------------------------------------------------------------------

âœ… /* After */
interface ServerResponse<T> {
	statusCode: number;
	payload: T;
}

const api = {
  /* get: <T>(url: string, config?: AxiosRequestConfig) => Promise<AxiosResponse<ServerResponse<T>, any>> */
  get: <T>(url: string, config?: AxiosRequestConfig) => {
    return axios.get<ServerResponse<T>>(url, config);
  },
};

/* const fooResponse: Promise<AxiosResponse<ServerResponse<FooResponse>, any>> */
const fooResponse = api.get<FooResponse>();
/* const barResponse: Promise<AxiosResponse<ServerResponse<BarResponse>, any>> */
const barResponse = api.get<BarResponse>();
```
